mod linspace;
mod utils;
mod image;
mod complex;
mod fractals;

use fractals::{FractalGenerator};

// region POINTS
const POINTS: [(f64, f64, f64, f64); 64] = [
    (-0.7463, -0.7413, 0.1102, 0.11520000000000001),
    (-0.7453, -0.7446499999999999, 0.1127, 0.11334999999999999),
    (-0.74529, -0.74514, 0.113075, 0.11322499999999999),
    (-0.745428, -0.745398, 0.113009, 0.113039),
    (-0.16, -0.134, 1.0405, 1.0665),
    (-0.925, -0.893, 0.266, 0.29800000000000004),
    (-1.25066, -1.25049, 0.02012, 0.02029),
    (-0.748, -0.7466, 0.1, 0.1014),
    (-0.235125, -0.235085, 0.827215, 0.8272550000000001),
    (-0.722, -0.703, 0.246, 0.265),
    (-1.315180982097868, -1.315180982097768, 0.073481649996795, 0.07348164999689501),
    (-0.156653458, -0.156653456, 1.039128122, 1.0391281239999999),
    (-0.1568046, -0.15680459999899998, 1.0390207, 1.039020700001),
    (-0.16070135, -0.16070125, 1.0375665, 1.0375666000000001),
    (0.2549870375144766, 0.2549870375145766, -0.0005679790528465, -0.0005679790527465),
    (0.267235642726, 0.267235642841, -0.003347589624, -0.003347589509),
    (-0.0452407411, -0.045240566100000004, 0.986816213, 0.986816388),
    (-0.0452407411, -0.0452407367, 0.9868162204352258, 0.9868162248352258),
    (-0.0452407411, -0.04524074042, 0.9868162204352258, 0.9868162211152257),
    (-0.0452407411, -0.04524074083, 0.9868162204352258, 0.9868162207052258),
    (-0.04524074130409, -0.04524074130179, 0.9868162207157838, 0.9868162207180838),
    (-0.04524074130409, -0.045240741304021996, 0.9868162207157852, 0.9868162207158532),
    (0.281717921930775, 0.281717921935925, 0.5771052841488505, 0.5771052841540005),
    (0.281717921930775, 0.281717921932025, 0.5771052841488505, 0.5771052841501005),
    (0.281717921930775, 0.28171792193125, 0.5771052841488505, 0.5771052841493255),
    (0.281717921930775, 0.281717921930953, 0.5771052841488505, 0.5771052841490285),
    (0.281717921930775, 0.28171792193086, 0.5771052841488505, 0.5771052841489356),
    (0.281717921930775, 0.281717921930815, 0.5771052841488505, 0.5771052841488905),
    (0.281717921930775, 0.2817179219307942, 0.5771052841488505, 0.5771052841488697),
    (-0.840719, -0.8406399999999999, 0.22442, 0.224499),
    (-0.81153120295763, -0.8112312029576301, 0.20142958206181, 0.20172958206181),
    (-0.81153120295763, -0.81152530295763, 0.20142958206181, 0.20143548206181),
    (-0.81153120295763, -0.81153115695763, 0.20142958206181, 0.20142962806181),
    (-0.81153120295763, -0.81153120144763, 0.20142958206181, 0.20142958357180998),
    (-0.81153120295763, -0.811531202957518, 0.20142958206181, 0.201429582061922),
    (-0.8115312340458353, -0.8115312340458013, 0.2014296112433656, 0.20142961124339961),
    (0.452721018749286, 0.452721018749396, 0.39649427698014, 0.39649427698025),
    (0.45272105023, 0.45272105293, 0.396494224267, 0.396494226967),
    (0.45272105023, 0.45272105061999995, 0.396494224267, 0.39649422465699996),
    (0.45272105023, 0.45272105037, 0.396494224267, 0.396494224407),
    (-1.1533577030005, -1.1533577024705, 0.307486987838885, 0.307486988368885),
    (-1.1533577030005, -1.153357703000405, 0.307486987838885, 0.30748698783898),
    (-1.15412664822215, -1.15412664512215, 0.30877492767139, 0.30877493077138995),
    (-1.15412664822215, -1.15412664816015, 0.30877492767139, 0.30877492773339),
    (-1.15412664822215, -1.15412664821265, 0.30877492767139, 0.30877492768089),
    (-1.15412664822215, -1.15412664821845, 0.30877492767139, 0.30877492767508996),
    (-1.7590170270659, -1.7590170270648, 0.01916067191295, 0.01916067191405),
    (-1.99999911758738, -1.9999991175859, 0.0, 1.48e-12),
    (-1.99999911758738, -1.99999911758679, 0.0, 5.9e-13),
    (-1.99999911758738, -1.99999911758713, 0.0, 2.5e-13),
    (0.432539867562512, 0.432543067562512, 0.226118675951765, 0.226121875951765),
    (0.432539867562512, 0.432539867562832, 0.226118675951765, 0.22611867595208499),
    (0.432539867562512, 0.432539867562585, 0.226118675951765, 0.226118675951838),
    (0.432539867562512, 0.4325398675625302, 0.226118675951818, 0.2261186759518362),
    (0.3369844464869, 0.3369844465049, 0.048778219666, 0.048778219684),
    (0.3369844464873, 0.3369844464915, 0.0487782196791, 0.048778219683300005),
    (0.33698444648918, 0.33698444648939, 0.048778219681, 0.048778219681209996),
    (0.2929859127507, 0.2929865827507, 0.6117848324958, 0.6117855024958),
    (0.2929859127507, 0.29298591361070003, 0.6117848324958, 0.6117848333557999),
    (0.2929859127507, 0.29298591279470004, 0.6117848324958, 0.6117848325398),
    (0.2929859127507, 0.2929859127607, 0.6117848324958, 0.6117848325058),
    (-0.936532336, -0.9365321609999999, 0.2633616, 0.26336177499999996),
    (-0.7336438924199521, -0.7336438919899521, 0.2455211406714035, 0.2455211411014035),
    (-0.7336438924199521, -0.7336438924199071, 0.2455211406714035, 0.24552114067144848)
];
// endregion


fn main() {
    let mut fgen= FractalGenerator::new(
        -2.0, 2.0, -2.0, 2.0,
        1000, 1024, 1024
    );
    for (index, &point) in POINTS.iter().enumerate() {
        let (rstart, rend, istart, iend) = point;
        fgen.move_view(rstart, rend, istart, iend);
        fgen.generate();
        fgen.save_to_file(format!("fractals/pic{}.ppm", index).as_str());
    }
}